#!/usr/bin/env node
var path = require('path');
var fs = require('fs');
var docopt = require('docopt').docopt;
var build = require('../lib/build');

var doc = "Usage: \n\
  bldr build <entry> [--output=<out>] [--prefix=<prefix>]\n\
  \n\
Options: \n\
  -h --help                     Show this help \n\
  -v --version                  Show version and exit \n\
  -o <out> --output=<out>       Write the file to this path. Default is echo to stdout. \n\
  -p <prefix> --prefix=<prefix> Prefix the app requires. Default: '/js' \n\
";

var result = docopt(doc, {version: '0.0.1', help: true});

if (result.build) {
  //console.log(result);
  var requirePath = path.join(process.cwd(),result['<entry>']);
  build(requirePath, {
    output: result['--output'],
    prefix: result['--prefix'] || '/js'
  });
}

